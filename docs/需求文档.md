**一、文档信息**

- 文档名称：接口自动化测试平台（Web）产品需求文档（PRD）  
- 产品名称（暂定）：Slow Platform / 接口自动化测试平台  
- 文档版本：V1.0  
- 编写人：neway  
- 审核人：neway  
- 创建日期：2026-02-10 
- 更新记录：  
  - V1.0：初始版本，定义平台的 V1 核心需求（单接口测试、多接口组合测试）

---

**二、产品概述**

- 产品定位：
  一款面向公司测试人员的 Web 端接口自动化测试平台，支持接口管理、单接口测试、多接口组合场景测试以及测试计划与结果管理，重点解决“日常接口验证效率低、测试资产分散不可复用”的问题。

- 目标用户：
  - 测试工程师（功能测试/接口测试）  
  - 自动化测试工程师  
  - 视情况：开发工程师、测试负责人只读查看报告

- 产品目标（V1）：  
  - 支持测试人员在平台中快速配置接口信息并完成单接口调试与校验。  
  - 支持将多个接口串联为业务场景（多接口组合），配置请求依赖关系与断言，实现回归场景的一键执行。  
  - 支持保存并管理接口测试资产（接口、用例、场景），可复用、可共享。  
  - 提供基本的执行结果查看与失败原因定位能力（请求/响应详情、断言结果）。  
  - 暂不关注高并发性能测试，仅满足日常功能性接口验证场景。

- 不在 V1 范围内：  
  - 性能测试（高并发、压测、容量评估等）。  
  - 数据驱动（多组合数据驱动同一用例）— 可在后续版本规划。  
  - CI/CD 集成、流水线打通。  
  - Mock 服务（模拟服务端返回）。  
  - 复杂权限体系（如细粒度数据权限、多租户隔离等）。

---

**三、术语与定义**

- 接口（API）：  
  指 HTTP/HTTPS 协议下的 REST / RPC 等接口（V1 关注 HTTP(S)）。  
- 单接口测试用例：  
  针对单个接口的一组请求配置与期望结果（断言）。  
- 场景 / 流程（多接口组合）：  
  按顺序执行的多个接口调用集合，接口间可通过变量传递数据，用于模拟实际业务流程。  
- 环境（Environment）：  
  接口调用所依赖的运行环境配置，如 dev / test / pre / prod，对应 baseURL、通用 Header、认证信息等。  
- 断言：  
  对接口响应的检查规则，如状态码、响应时间、JSON 字段值等。  
- 变量：  
  可复用的键值对，用于请求参数、Header、Body、断言中，支持环境变量、场景变量等。
  - 优先级：场景运行时提取变量 > 场景级变量 > 环境变量 > 全局变量。

---

**四、用户与角色**

- 测试工程师（核心用户）  
  - 需求：  
    - 方便维护接口信息和测试用例，不依赖开发工具（如 Postman/IDE）。  
    - 快速执行单接口验证，调试参数与断言。  
    - 创建、维护业务流程场景，回归测试时一键执行。  
    - 查看执行结果与失败原因，支持导出/分享给相关方。

- 自动化测试工程师  
  - 需求：  
    - 承担平台初期搭建、规范制定、复杂场景配置工作。  
    - 能对场景、变量、公共组件进行统一维护。  
    - 需要一定权限管理和配置管理能力。

- 测试负责人 / 项目负责人（只读）  
  - 需求：  
    - 查看某项目/版本的测试场景执行情况和结果统计。  
    - 了解失败场景数量及失败原因分类（简单统计即可）。

- 后续可能角色（V1 可不实现或简化）  
  - 管理员：维护平台基础配置、用户/权限等。

---

**五、典型使用场景 / 用户故事**

1. **单接口调试**  
   - 测试工程师在新需求联调前，根据接口文档在平台中新建接口。  
   - 配置请求方法、URL、Header、Body、Query 参数。  
   - 选择环境（如 dev），点击“发送请求”，查看响应。  
   - 调整参数、补充断言，如“状态码 = 200”“响应体中 code = 0”。  
   - 保存为“单接口测试用例”，后续可一键执行。

2. **业务流程场景回归**  
   - 自动化测试工程师建立“注册-登录-查询个人信息”场景。  
     - 步骤1：调用注册接口，取出 userId / token。  
     - 步骤2：调用登录接口，使用上一步返回的账号信息。  
     - 步骤3：调用查询接口，使用 token 放入 Header。  
   - 为每一步配置断言（注册成功、登录成功、查询信息正确）。  
   - 将场景加入“回归测试计划”，每个版本回归时一键执行，查看整体通过情况。

3. **接口变更回归**  
   - 开发修改了某几个接口。  
   - 测试从“接口列表”中筛选出相关接口关联的场景。  
   - 执行这些场景，观察结果与之前版本的差异。  

4. **问题分析与沟通**  
   - 场景执行后，有部分步骤失败。  
   - 测试打开场景执行详情，查看失败步骤的请求/响应、断言详情。  
   - 一键复制请求信息或导出报告给开发，辅助排查。

---

**六、功能需求**

以下为 V1 需要覆盖的核心功能模块。

---

**6.1 登录与用户基础管理（简化版）**

- F1-1：登录  
  - 支持公司现有登录方式（假设：账号密码登录，后期可接入单点登录）。  
  - 登录后进入平台首页，显示用户上次使用的项目或项目列表。

- F1-2：用户角色（简化）  
  - 至少区分：普通用户（测试）、管理员（平台维护）。  
  - 管理员可管理基础配置与用户（V1 可只支持通过后台数据库配置，界面可后置）。

---

**6.2 项目与环境管理**

- F2-1：项目管理  
  - 创建项目：名称、描述。  
  - 项目列表：支持按名称搜索，显示项目描述、创建人、创建时间。  
  - 项目归属：接口、测试用例、场景、计划均归属于某项目。  
  - 项目启用/停用状态（停用后仅可查看，不可新增执行）。

- F2-2：环境管理  
  - 在项目下维护多个环境：dev / test / pre / prod 等。  
  - 每个环境包含：  
    - 环境名称、标识（如 dev、test）。  
    - 基础 URL（Base URL）。  
    - 公共 Header（如 Authorization、Content-Type）。  
    - 公共 Query 参数或 Body 片段（可选）。  
  - 支持设置“默认环境”，用于执行时的默认选择。  
  - 执行用例/场景前可选择具体环境。

---

**6.3 接口管理**

- F3-1：接口目录与分类  
  - 支持按“模块/分组”对接口进行分类，例如：用户、订单、支付。  
  - 支持树状或列表+标签形式展示。

- F3-2：接口基本信息  
  - 字段：  
    - 接口名称  
    - 所属项目  
    - 所属模块/分组  
    - 请求方法（GET/POST/PUT/DELETE/PATCH 等）  
    - URL（支持路径变量）  
    - 描述 / 备注  
  - 接口列表支持搜索（按名称、URL）、筛选（按模块、方法）。

- F3-3：接口请求配置  
  - 支持配置：  
    - Path 参数  
    - Query 参数  
    - Header  
    - Body（JSON / Form-Data(V1仅文本) / x-www-form-urlencoded / Raw）  
  - 支持引用变量：环境变量、全局变量、场景变量。  
  - 支持保存为“接口默认请求模板”。

- F3-4：接口导入/导出（V1 暂不实现）  
  - V1：先支持手工维护接口；OpenAPI/Swagger 导入可作为后续版本。  

---

**6.4 单接口用例**

- F4-1：用例创建  
  - 基于已有接口创建用例，也支持“从零创建并同时创建接口”。  
  - 用例字段：  
    - 用例名称    
    - 所属项目/模块  
    - 前置条件（描述文本即可）  
    - 请求配置（可覆盖接口默认配置）  
    - 断言配置  
    - 标签（如 冒烟/回归/高优先级）

- F4-2：请求执行  
  - 在用例编辑界面可直接选择环境并执行：  
    - 发送请求并展示：请求详情（最终实际请求）、响应详情（状态码、Header、Body、耗时）。  
    - 将断言结果可视化展示（通过/失败）。  

- F4-3：断言能力（V1 范围）  
  - 支持：  
    - 状态码断言，如 = 200。  
    - 响应时间断言，如 < 2s（可选）。  
    - JSON 字段断言：  
      - 通过 JSONPath / 类似路径表达式定位字段。  
      - 支持 =、!=、包含、不包含、>、<、长度等基础比较。  
  - 断言列表展示，可配置多个断言。

- F4-4：用例管理  
  - 用例列表页：按接口、模块、标签、关键字搜索。  
  - 用例的启用/停用状态。  
  - 支持克隆用例（复制后修改）。

---

**6.5 场景用例**

- F5-1：场景基本信息  
  - 字段：  
    - 场景名称  
    - 所属项目  
    - 所属模块（可选）  
    - 描述（说明业务流程）  
    - 标签（冒烟、核心流程、回归等）

- F5-2：步骤编排  
  - 支持在场景中按顺序添加多个“步骤”，每个步骤关联一个接口或单接口用例。  
  - 每个步骤可单独配置：  
    - 执行环境（默认继承场景环境）  
    - 请求参数（覆盖接口/用例默认值）  
    - 步骤级断言  
  - 支持步骤的拖拽排序、删除、禁用（跳过执行）。

- F5-3：数据关联与变量传递  
  - 支持在步骤 A 的响应中抽取字段（如 token、userId），保存为场景变量。  
  - 在后续步骤 B 中，可引用这些变量填充到 URL、Header、Body、断言中。  
  - 变量形式：如 {{token}}。  

- F5-4：场景执行  
  - 指定环境，点击执行后按顺序执行所有启用步骤。  
  - 实时展示步骤执行进度与结果（通过/失败）。  
  - 若某步骤失败，可以配置：  
    - 默认行为：V1 默认策略为“失败即终止”，可选“失败继续执行”。  

- F5-5：场景管理  
  - 列表页：显示场景名称、所属项目、最近执行时间、最近执行结果。  
  - 支持按名称、标签搜索。  
  - 支持克隆场景。

---

**6.6 测试计划与执行管理（简化版）**

- F6-1：测试计划  
  - 可将多个场景加入一个“测试计划”，对应某个版本或需求集。  
  - 字段：  
    - 计划名称  
    - 所属项目  
    - 关联场景列表  
    - 说明（如“版本 V1.2 回归”）  

- F6-2：计划执行  
  - 在计划层面一键执行所有关联场景。  
  - 可以选择统一环境执行（对所有场景统一指定环境）。  
  - 展示整体执行进度与汇总结果：  
    - 总场景数、通过数、失败数。  

- F6-3：计划结果查看  
  - 计划历史执行记录列表。  
  - 支持点击某次执行查看其下每个场景的执行结果，进一步钻取到场景步骤详情。

- F6-4：定时任务
  - 支持为测试计划配置定时执行规则（Cron 表达式或简单选择，如每天 08:00）。
  - 定时触发执行时，需指定执行环境。
  - 执行完成后记录历史并触发通知（如有）。

---

**6.7 执行结果与报告**

- F7-1：用例/场景执行历史  
  - 在用例、场景详情页展示历史执行记录（最近 N 次）。  
  - 每条记录包括：执行人、执行时间、环境、结果（通过/失败）。

- F7-2：执行详情  
  - 步骤级展示：  
    - 请求：URL、方法、Header、Body、最终请求参数（变量替换后的实际值）。  
    - 响应：状态码、Header、Body、耗时。  
    - 断言列表及结果（哪个断言失败、期望值/实际值）。  

- F7-3：报告导出（V1 简化）  
  - V1 可先支持：  
    - 在页面中查看汇总结果。  
    - 提供“复制为文本/Markdown”能力，便于粘贴到需求/缺陷系统。  
  - V1 暂不支持：导出为 PDF/HTML 可在后续版本支持。

---

**6.8 通知与协作**

- F8-1：基础通知
  - 支持配置简易 Webhook URL（如飞书/钉钉机器人地址）。
  - 计划执行结束（或定时任务执行结束）后，向该 URL 发送 JSON 格式的汇总结果通知。
  - V1 暂不内置邮件服务。  

---

**6.9 系统与配置（简要）**

- F9-1：全局变量管理  
  - 支持在项目下配置“全局变量”，如公共 token、域名 等。  
  - 可在接口/用例/场景中引用。

- F9-2：平台配置（管理员）  
  - V1 可仅实现简易界面或通过配置文件/数据库维护：  
    - 系统级参数（如最大响应体记录大小）。  
    - 日志级别等。

---

**七、非功能需求（V1不考虑）**

- N1：性能  
  - 本产品 V1 对系统性能无严格要求，但应支持：  
    - 单用户连续执行场景时界面响应流畅。  
    - 单次执行场景步骤数量建议控制在合理范围（如 50 步以内）。  

- N2：可用性  
  - Web 页面对测试人员友好，操作路径清晰。  
  - 关键操作（删除项目/接口/场景等）需二次确认。  

- N3：可靠性  
  - 测试执行过程中如遇接口超时或网络异常，需要在结果中清晰标记为“错误/超时”，并记录错误信息。  
  - 避免因单接口异常导致平台整体不可用。  

- N4：安全性  
  - 用户登录必须鉴权，重要操作需检查权限。  
  - 不在页面或日志中暴露敏感信息（如密码、密钥的明文）。  

- N5：可维护性与扩展性  
  - 设计上为后续扩展预留空间：  
    - 数据驱动测试  
    - CI/CD 集成触发执行  
    - Mock 服务  
    - 更多断言类型、协议类型（如 WebSocket、MQ 等）

---

**八、版本规划（V1 范围）**

- V1 核心功能：  
  - 项目与环境管理  
  - 接口管理（手工维护）  
  - 单接口测试用例  
  - 场景/多接口组合测试（含变量传递与基础断言）  
  - 测试计划（简化）、定时任务与执行管理  
  - 执行结果、基础报告查看与 Webhook 通知  
  - 简单登录与基础角色区分

- 后续版本方向（非本 PRD 范围，仅列举）：  
  - 接口文档导入（Swagger/OpenAPI）。  
  - 数据驱动与参数化。  
  - 更丰富的报告和统计视图（通过率趋势、模块维度质量视图等）。  
  - 与 CI/CD 打通，实现流水线自动执行。  
  - Mock 服务、性能测试能力。  
